<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Monospace (ASCII art generator)</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="icon" href="assets/favicon.ico" />
  </head>
  <body>
    <!-- partial:index.partial.html -->
    <div class="layout">
      <aside class="sidebar">
        <section class="control-group global-settings">
          <h3>Global Settings</h3>
          <div class="control">
            <div class="theme-switch-wrapper">
              <label for="themeToggle">Theme:</label>
              <label class="theme-switch">
                <input type="checkbox" id="themeToggle">
                <span class="slider"></span>
              </label>
            </div>
          </div>
          <div class="control">
            <label for="ignoreWhite">Ignore Pure White:</label>
            <input type="checkbox" id="ignoreWhite" checked />
          </div>
        </section>

        <section class="control-group upload-group">
          <h3>1. Upload Your File</h3>
          <div class="file-upload-control">
            <div class="control">
              <input type="file" id="upload" accept="image/*" />
              <label for="upload">Choose an image to convert</label>
            </div>
            <div class="file-info">
              <div class="file-preview">
                <img class="file-thumbnail" alt="" />
              </div>
              <div class="file-details">
                <!-- <svg
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                > -->
                  <path
                    d="M8.5 1.5h-4a1 1 0 00-1 1v11a1 1 0 001 1h7a1 1 0 001-1v-8m-4-4l4 4m0-4l-4 4"
                    stroke="currentColor"
                    stroke-width="1.2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span class="file-name"></span>
              </div>
            </div>
          </div>
        </section>

        <section class="control-group image-processing">
          <h3>2. Basic Adjustments</h3>
          <div class="control">
            <label for="asciiWidth">Output Width:</label>
            <input
              type="range"
              id="asciiWidth"
              min="20"
              max="300"
              value="150"
            />
            <span class="value-label" id="asciiWidthVal">100</span>
          </div>
          <div class="control">
            <label for="brightness">Brightness:</label>
            <input
              type="range"
              id="brightness"
              min="-100"
              max="100"
              value="0"
            />
            <span class="value-label" id="brightnessVal">0</span>
          </div>
          <div class="control">
            <label for="contrast">Contrast:</label>
            <input type="range" id="contrast" min="-100" max="100" value="0" />
            <span class="value-label" id="contrastVal">0</span>
          </div>
          <div class="control">
            <label for="blur">Blur (px):</label>
            <input
              type="range"
              id="blur"
              min="0"
              max="10"
              step="0.01"
              value="0"
            />
            <span class="value-label" id="blurVal">0</span>
          </div>
          <div class="control">
            <label for="invert">Invert Colors:</label>
            <input type="checkbox" id="invert" />
          </div>
        </section>

        <section class="control-group dithering-settings">
          <h3>3. Dithering Options</h3>
          <div class="control">
            <label for="dithering">Enable Dithering:</label>
            <input type="checkbox" id="dithering" checked />
          </div>
          <div class="control">
            <label for="ditherAlgorithm">Dither Algorithm:</label>
            <select id="ditherAlgorithm">
              <option value="floyd" selected>Floydâ€“Steinberg</option>
              <option value="atkinson">Atkinson</option>
              <option value="noise">Noise</option>
              <option value="ordered">Ordered</option>
            </select>
          </div>
        </section>

        <section class="control-group charset-settings">
          <h3>4. Character Set</h3>
          <div class="control">
            <label for="charset">Select Set:</label>
            <select id="charset">
              <option value="detailed" selected>Detailed</option>
              <option value="standard">Standard</option>
              <option value="blocks">Blocks</option>
              <option value="binary">Binary</option>
              <option value="hex">Hex</option>
              <option value="manual">Manual</option>
            </select>
          </div>
          <div class="control" id="manualCharControl" style="display: none">
            <label for="manualCharInput">Manual Character:</label>
            <input type="text" id="manualCharInput" maxlength="1" value="0" />
          </div>
        </section>

        <section class="control-group edge-detection-settings">
          <h3>5. Edge Detection</h3>
          <p>Select one edge detection method:</p>
          <div class="control">
            <input
              type="radio"
              name="edgeMethod"
              id="edgeNone"
              value="none"
              checked
            />
            <label for="edgeNone">No Edge Detection</label>
          </div>
          <div class="control">
            <input
              type="radio"
              name="edgeMethod"
              id="edgeSobel"
              value="sobel"
            />
            <label for="edgeSobel">Sobel Edge Detection</label>
          </div>
          <div class="control">
            <input type="radio" name="edgeMethod" id="edgeDoG" value="dog" />
            <label for="edgeDoG">DoG (Contour) Detection</label>
          </div>
          <div class="control" id="sobelThresholdControl" style="display: none">
            <label for="edgeThreshold">Sobel Threshold:</label>
            <input
              type="range"
              id="edgeThreshold"
              min="0"
              max="255"
              value="100"
            />
            <span class="value-label" id="edgeThresholdVal">100</span>
          </div>
          <div class="control" id="dogThresholdControl" style="display: none">
            <label for="dogEdgeThreshold">DoG Threshold:</label>
            <input
              type="range"
              id="dogEdgeThreshold"
              min="0"
              max="255"
              value="100"
            />
            <span class="value-label" id="dogEdgeThresholdVal">100</span>
          </div>
        </section>

        <section class="control-group display-settings">
          <h3>6. Display Settings</h3>
          <div class="control">
            <label for="zoom">Zoom (%):</label>
            <input type="range" id="zoom" min="20" max="600" value="100" />
            <span class="value-label" id="zoomVal">100</span>
          </div>
        </section>

        <section class="control-group misc-settings">
          <div class="control">
            <button id="reset">Reset All Settings</button>
          </div>
        </section>
      </aside>

      <main class="main-content">
        <pre id="ascii-art"></pre>
        <div class="button-group">
          <button id="copyBtn">
            Copy
            <img src="./svg/copy.svg" alt="" width="18" height="18" />
          </button>
          <button id="downloadBtnSvg">
            SVG
            <img
              src="./svg/file-arrow-down.svg"
              alt=""
              width="18"
              height="18"
            />
          </button>
          <button id="downloadBtn">
            PNG
            <img
              src="./svg/file-arrow-down.svg"
              alt=""
              width="18"
              height="18"
            />
          </button>
        </div>
      </main>
    </div>
    <canvas id="canvas" style="display: none"></canvas>
    <!-- partial -->
    <script src="./script.js"></script>
    <script>
      // Update sidebar width
      const updateSidebarWidth = () => {
        const sidebar = document.querySelector(".sidebar");
        const width = sidebar.offsetWidth;
        document.documentElement.style.setProperty(
          "--sidebar-width",
          width + "px"
        );
      };

      // Initial update
      updateSidebarWidth();

      // Update on window resize
      window.addEventListener("resize", updateSidebarWidth);

      // Create a ResizeObserver to watch the sidebar
      const resizeObserver = new ResizeObserver(updateSidebarWidth);
      resizeObserver.observe(document.querySelector(".sidebar"));
    </script>
  </body>
</html>
